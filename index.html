<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="reset.css" type="text/css">
        <link rel="stylesheet" href="style.css" type="text/css">
    </head>

    <body>
        <header id="header">
            <h1>Rock Paper Scissors</h1>
        </header>

        <main id="main">
            <div id="displayItemBox">
                <div id="playerPick"></div>
                <div id="compPick"></div>
            </div>
            <div id="chooseItemBox">
                <input id="rockButton" type="image" src="/media/rock.jpg" />
                <input id="paperButton" type="image" src="/media/paper.jpg" />
                <input id="scissorsButton" type="image" src="/media/scissors.jpg" />
            </div>

            <div id="statusBox">
      <!--      <button id="resetButton">Reset</button>    -->
                <div id="scoreBox">
                    <div id="winCountBox">
                        <div id ="winP"><p>W:</p></div>
                        <div id="winCount"></div>
                    </div>
                    <div id="loseCountBox">
                        <div id="loseP"><p>L:</p></div>
                        <div id="loseCount"></div>
                    </div>

                </div>
            </div>
            </div>
        </main>

        <script>
            let numWin = 0;
            let numLoss = 0;
            let playerPick = "";
            let computerPick = "";
            let result = "Win 5 games against computer!";

            const winCountDiv = document.querySelector('#winCount');
            let winCount = document.createElement('p');

            const loseCountDiv = document.querySelector('#loseCount');
            let loseCount = document.createElement('p');

            const showResultDiv = document.querySelector("#main");
            let showResult = document.createElement('p');

            const playerPickBox = document.querySelector('#playerPick');
            let displayPlayerPick = document.createElement('img');

            const compPickBox = document.querySelector('#compPick');
            let displayCompPick = document.createElement('img');

            const rockBtn = document.querySelector('#rockButton');
            const paperBtn = document.querySelector('#paperButton');
            const scissorsBtn = document.querySelector('#scissorsButton');


            function showAllDom() {
                winCount.textContent = numWin;
                try {
                    winCountDiv.removeChild(winCount);
                    winCountDiv.appendChild(winCount);
                } catch {
                    winCountDiv.appendChild(winCount);
                }                               

                loseCount.textContent = numLoss;
                try {
                    loseCountDiv.removeChild(loseCount);
                    loseCountDiv.appendChild(loseCount);
                } catch {
                    loseCountDiv.appendChild(loseCount);
                }               

                showResult.setAttribute("class", "showResultBox")
                showResult.textContent = result;
                try {
                    showResultDiv.removeChild(showResult);
                    showResultDiv.appendChild(showResult);
                } catch {
                    showResultDiv.appendChild(showResult);
                }

                if (playerPick) {
                    displayPlayerPick.setAttribute("class", "showPick");
                    if (playerPick == "rock") {
                        displayPlayerPick.setAttribute("src", "/media/rock.jpg");
                    } else if (playerPick == "paper") {
                        displayPlayerPick.setAttribute("src", "/media/paper.jpg");
                    } else {
                        displayPlayerPick.setAttribute("src", "/media/scissors.jpg");
                    }
                    try {
                        playerPickBox.removeChild(displayPlayerPick);
                        playerPickBox.appendChild(displayPlayerPick);
                    } catch {
                        playerPickBox.appendChild(displayPlayerPick);
                    }                    
                }

                if (computerPick) {
                    displayCompPick.setAttribute("class", "showPick");
                    if (computerPick == "rock") {
                        displayCompPick.setAttribute("src", "/media/rock.jpg");
                    } else if (computerPick == "paper") {
                        displayCompPick.setAttribute("src", "/media/paper.jpg");
                    } else {
                        displayCompPick.setAttribute("src", "/media/scissors.jpg");
                    }
                    try {
                        compPickBox.removeChild(displayCompPick);
                        compPickBox.appendChild(displayCompPick);
                    } catch {
                        compPickBox.appendChild(displayCompPick);
                    }                   
                }
            }
            function computerPlay() {
                let num1 = Math.random() * 3;
                let num2 = Math.floor(num1 + 1);
                if (num2 == 1) {
                    return "rock";
                } else if (num2 == 2) {
                    return "paper";
                } else {
                    return "scissors";
                }
            }
            function playRound(playerSelection, computerSelection) {
                let resultRound = (playerSelection === computerSelection) ? "It's a Draw!" : 
                    (playerSelection === "rock" && computerSelection === "paper") ? "You Lose! Paper beats Rock." :
                    (playerSelection === "rock" && computerSelection === "scissors") ? "You Win! Rock beats Scissors." :

                    (playerSelection === "paper" && computerSelection === "scissors") ? "You Lose! Scissors beats Paper." :
                    (playerSelection === "paper" && computerSelection === "rock") ? "You Win! Paper beats Rock." :

                    (playerSelection === "scissors" && computerSelection === "rock") ? "You Lose! Rock beats Scissors." :
                    
                    "You Win! Scissors beats Paper.";

                return resultRound;
}           
            function updateWinLoss() {
                if (result.includes("Win")) {
                    numWin++;
                } else if (result.includes("Lose")) {
                    numLoss++;
                } 
            }
            function playUpdateShow() {
                computerPick = computerPlay();
                result = playRound(playerPick, computerPick);
                updateWinLoss();
                showAllDom();
            }
            function gameOver() {
                result = 'Game Over! Refresh the page to play again!';
                showResult.setAttribute("class", "showResultBox")
                showResult.textContent = result;
                showResultDiv.removeChild(showResult);
                showResultDiv.appendChild(showResult);
            }
            
            showAllDom();
            
            rockBtn.onclick = () => {
                playerPick = "rock";
                if (numWin < 5 && numLoss < 5) {
                    playUpdateShow();
                } else {
                    gameOver();
                }               
            }

            paperBtn.onclick = () => {
                playerPick = "paper";           
                if (numWin < 5 && numLoss < 5) {
                    playUpdateShow();
                } else {
                    gameOver();
                }
            }

            scissorsBtn.onclick = () => {
                playerPick = "scissors";        
                if (numWin < 5 && numLoss < 5) {
                    playUpdateShow();
                } else {
                    gameOver();
                }
            }
    
        </script>
    </body>
</html>